_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[25],{"5i2T":function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[gid]/[token]",function(){return n("8Kfv")}])},"8Kfv":function(e,t,n){"use strict";n.r(t);var o=n("xkWc"),r=n("aNYv"),a=n("mK0O"),i=n("mXGw"),c=n.n(i),s=n("OMXU"),u=n("Fcif"),l=n("dV/x"),d=(n("xVO4"),n("W0B4"),n("PDtE")),m=n("+Gfr"),f=n("gbh0"),p=n("tCsj"),b=n("x+AB"),g=n("mxPc"),h=i.forwardRef((function(e,t){var n=e.children,o=e.classes,r=e.className,a=e.color,c=void 0===a?"default":a,s=e.component,m=void 0===s?"button":s,f=e.disabled,p=void 0!==f&&f,h=e.disableFocusRipple,v=void 0!==h&&h,O=e.focusVisibleClassName,y=e.size,j=void 0===y?"large":y,x=e.variant,E=void 0===x?"round":x,w=Object(l.a)(e,["children","classes","className","color","component","disabled","disableFocusRipple","focusVisibleClassName","size","variant"]);return i.createElement(b.a,Object(u.a)({className:Object(d.a)(o.root,r,"round"!==E&&o.extended,"large"!==j&&o["size".concat(Object(g.a)(j))],p&&o.disabled,{primary:o.primary,secondary:o.secondary,inherit:o.colorInherit}[c]),component:m,disabled:p,focusRipple:!v,focusVisibleClassName:Object(d.a)(o.focusVisible,O),ref:t},w),i.createElement("span",{className:o.label},n))})),v=Object(f.a)((function(e){return{root:Object(u.a)({},e.typography.button,{boxSizing:"border-box",minHeight:36,transition:e.transitions.create(["background-color","box-shadow","border"],{duration:e.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,boxShadow:e.shadows[6],"&:active":{boxShadow:e.shadows[12]},color:e.palette.getContrastText(e.palette.grey[300]),backgroundColor:e.palette.grey[300],"&:hover":{backgroundColor:e.palette.grey.A100,"@media (hover: none)":{backgroundColor:e.palette.grey[300]},"&$disabled":{backgroundColor:e.palette.action.disabledBackground},textDecoration:"none"},"&$focusVisible":{boxShadow:e.shadows[6]},"&$disabled":{color:e.palette.action.disabled,boxShadow:e.shadows[0],backgroundColor:e.palette.action.disabledBackground}}),label:{width:"100%",display:"inherit",alignItems:"inherit",justifyContent:"inherit"},primary:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.dark,"@media (hover: none)":{backgroundColor:e.palette.primary.main}}},secondary:{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main,"&:hover":{backgroundColor:e.palette.secondary.dark,"@media (hover: none)":{backgroundColor:e.palette.secondary.main}}},extended:{borderRadius:24,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48,"&$sizeSmall":{width:"auto",padding:"0 8px",borderRadius:17,minWidth:34,height:34},"&$sizeMedium":{width:"auto",padding:"0 16px",borderRadius:20,minWidth:40,height:40}},focusVisible:{},disabled:{},colorInherit:{color:"inherit"},sizeSmall:{width:40,height:40},sizeMedium:{width:48,height:48}}}),{name:"MuiFab"})(h),O=n("q3GK"),y=n("2Nex");function j(e){return"up"===e||"down"===e?"vertical":"right"===e||"left"===e?"horizontal":void 0}var x=i.forwardRef((function(e,t){var n=e.ariaLabel,o=e.FabProps,r=(o=void 0===o?{}:o).ref,a=Object(l.a)(o,["ref"]),c=e.children,s=e.classes,f=e.className,b=e.direction,h=void 0===b?"up":b,x=e.hidden,E=void 0!==x&&x,w=e.icon,k=e.onBlur,C=e.onClose,R=e.onFocus,N=e.onKeyDown,T=e.onMouseEnter,D=e.onMouseLeave,L=e.onOpen,M=e.open,S=(e.openIcon,e.TransitionComponent),V=void 0===S?p.a:S,B=e.transitionDuration,W=void 0===B?{enter:m.b.enteringScreen,exit:m.b.leavingScreen}:B,P=e.TransitionProps,z=Object(l.a)(e,["ariaLabel","FabProps","children","classes","className","direction","hidden","icon","onBlur","onClose","onFocus","onKeyDown","onMouseEnter","onMouseLeave","onOpen","open","openIcon","TransitionComponent","transitionDuration","TransitionProps"]),G=i.useRef();i.useEffect((function(){return function(){clearTimeout(G.current)}}),[]);var I=i.useRef(0),_=i.useRef(),A=i.useRef([]);A.current=[A.current[0]];var F=i.useCallback((function(e){A.current[0]=e}),[]),H=Object(O.a)(r,F),$=function(e,t){return function(n){A.current[e+1]=n,t&&t(n)}};i.useEffect((function(){M||(I.current=0,_.current=void 0)}),[M]);var K=function(e){"mouseleave"===e.type&&D&&D(e),"blur"===e.type&&k&&k(e),clearTimeout(G.current),C&&("blur"===e.type?(e.persist(),G.current=setTimeout((function(){C(e,"blur")}))):C(e,"mouseLeave"))},X=function(e){"mouseenter"===e.type&&T&&T(e),"focus"===e.type&&R&&R(e),clearTimeout(G.current),L&&!M&&(e.persist(),G.current=setTimeout((function(){L(e,{focus:"focus",mouseenter:"mouseEnter"}[e.type])})))},q=n.replace(/^[^a-z]+|[^\w:.-]+/gi,""),Y=i.Children.toArray(c).filter((function(e){return i.isValidElement(e)})),U=Y.map((function(e,t){var n=e.props.FabProps,o=(n=void 0===n?{}:n).ref,r=Object(l.a)(n,["ref"]);return i.cloneElement(e,{FabProps:Object(u.a)({},r,{ref:$(t,o)}),delay:30*(M?t:Y.length-t),open:M,id:"".concat(q,"-action-").concat(t)})}));return i.createElement("div",Object(u.a)({className:Object(d.a)(s.root,s["direction".concat(Object(g.a)(h))],f),ref:t,role:"presentation",onKeyDown:function(e){N&&N(e);var t,n,o,r=e.key.replace("Arrow","").toLowerCase(),a=_.current,i=void 0===a?r:a;if("Escape"!==e.key){if(j(r)===j(i)&&void 0!==j(r)){e.preventDefault();var c=r===i?1:-1,s=(t=I.current+c,n=0,o=A.current.length-1,t<n?n:t>o?o:t);A.current[s].focus(),I.current=s,_.current=i}}else C&&(A.current[0].focus(),C(e,"escapeKeyDown"))},onBlur:K,onFocus:X,onMouseEnter:X,onMouseLeave:K},z),i.createElement(V,Object(u.a)({in:!E,timeout:W,unmountOnExit:!0},P),i.createElement(v,Object(u.a)({color:"primary","aria-label":n,"aria-haspopup":"true","aria-expanded":M,"aria-controls":"".concat(q,"-actions")},a,{onClick:function(e){a.onClick&&a.onClick(e),clearTimeout(G.current),M?C&&C(e,"toggle"):L&&L(e,"toggle")},className:Object(d.a)(s.fab,a.className),ref:H}),i.isValidElement(w)&&Object(y.a)(w,["SpeedDialIcon"])?i.cloneElement(w,{open:M}):w)),i.createElement("div",{id:"".concat(q,"-actions"),role:"menu","aria-orientation":j(h),className:Object(d.a)(s.actions,!M&&s.actionsClosed)},U))})),E=Object(f.a)((function(e){return{root:{zIndex:e.zIndex.speedDial,display:"flex",alignItems:"center",pointerEvents:"none"},fab:{pointerEvents:"auto"},directionUp:{flexDirection:"column-reverse","& $actions":{flexDirection:"column-reverse",marginBottom:-32,paddingBottom:48}},directionDown:{flexDirection:"column","& $actions":{flexDirection:"column",marginTop:-32,paddingTop:48}},directionLeft:{flexDirection:"row-reverse","& $actions":{flexDirection:"row-reverse",marginRight:-32,paddingRight:48}},directionRight:{flexDirection:"row","& $actions":{flexDirection:"row",marginLeft:-32,paddingLeft:48}},actions:{display:"flex",pointerEvents:"auto"},actionsClosed:{transition:"top 0s linear 0.2s",pointerEvents:"none"}}}),{name:"MuiSpeedDial"})(x),w=n("/NZN"),k=n("ZjZ4"),C=n.n(k),R=n("/ZiB"),N=n("W6lt"),T=n("V2/N"),D=n("shiU"),L=n("9dpD"),M=n("NthX"),S=n.n(M),V=n("eijD"),B=n("R82R"),W=n("ozoj"),P=n("mdnY"),z=n("xds5"),G=n("Xasc"),I=n("YMGn"),_=n.n(I),A=n("vCr3"),F=n("k7Sn"),H=n("bBV7"),$=c.a.createElement,K=Object(B.a)((function(e){var t;return Object(W.a)({cover:{margin:e.spacing(0,"auto"),maxHeight:320,minHeight:150},container:(t={display:"grid",gridTemplateColumns:"repeat(5, 1fr)"},Object(a.a)(t,e.breakpoints.down("sm"),{gridTemplateColumns:"repeat(4, 1fr)"}),Object(a.a)(t,e.breakpoints.down("xs"),{gridTemplateColumns:"repeat(3, 1fr)"}),t),speedDial:{position:"fixed",right:16,bottom:16,zIndex:e.zIndex.speedDial-2},btn:{margin:e.spacing(1,0)}})})),X=function(e){var t=e.url,n=e.initialData,o=e.filecount,a=Object(A.a)(600),s=Object(r.a)(a,2),u=s[0],l=s[1],d=Object(F.useTranslation)(),m=Object(r.a)(d,1)[0],f=K(),p=(Object(H.useRouter)(),Object(i.useState)({open:!1,index:0})),b=(p[0],p[1],function(e){e?F.Router.push("/[gid]/[token]/read?current="+e,t+"/read?current="+e):F.Router.push("/[gid]/[token]/read",t+"/read")}),g=Object(P.e)(t,(function(e){var o=e.offset,r=e.withSWR,a=o||0,i=r(Object(P.c)("/api/gallery".concat(t,"/").concat(a),function(){var e=Object(V.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==a){e.next=2;break}return e.abrupt("return",n);case 2:return e.next=4,Object(z.c)(t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).data;return i?i.map((function(e,t){return $(T.a,{item:!0,key:e.url+t,container:!0,wrap:"nowrap",direction:"column"},$(T.a,{item:!0,xs:!0},$(D.a,null,$(N.a,{onClick:function(){return b(t+20*a)}},$(G.a,{className:f.cover,src:e.thumb})))),$(R.a,{align:"center"},t+1+20*a))})):new Array(20).fill(0).map((function(e,t){return $(T.a,{item:!0,key:t},$(D.a,null,$(L.a,{variant:"rect",animation:"wave",className:f.cover,height:150})))}))}),(function(e,t){e.data;return o<=20*(t+1)?null:t+1}),[]),h=g.pages,v=(g.isEmpty,g.isLoadingMore),O=g.isReachingEnd,y=g.pageSWRs,j=g.loadMore;Object(i.useEffect)((function(){!u||v||O||j()}),[u,v,O,j]);Object(i.useMemo)((function(){return C()(y.map((function(e){return e.data||[]})))}),[y]);return $(c.a.Fragment,null,$(T.a,{container:!0,className:f.container,spacing:2},h),$(w.a,{buttonRef:l,fullWidth:!0,disabled:v||O,className:f.btn},O?m("ReachEnd"):v?m("Loading")+"...":m("More")),$(E,{ariaLabel:"continue",open:!0,className:f.speedDial,onClick:function(){return b()},icon:$(_.a,{style:{color:"#fff"}})}))},q=n("apO0"),Y=n("zOGZ"),U=n("HbVm"),Z=n("YvUk"),J=n("2vW9"),Q=n("8NVm"),ee=n("oQEK"),te=n("u44p"),ne=n("v6vt"),oe=n("5bSt"),re=n("NQ0d"),ae=n("lOOT"),ie=n("ynas"),ce=n("xR0W"),se=n.n(ce),ue=n("UA9C"),le=n.n(ue),de=c.a.createElement,me=Object(B.a)((function(e){return Object(W.a)({comment:{wordBreak:"break-word",breakWord:"word-break"},hidden:{maxHeight:80,overflow:"hidden"}})})),fe=Object(i.forwardRef)((function(e,t){var n=e.commentList,o=e.hidden,c=me(),s=Object(F.useTranslation)(),u=Object(r.a)(s,1)[0];Object(H.useRouter)();return Object(i.useEffect)((function(){document.querySelectorAll('.MuiDialog-root a[href^="https://exhentai.org/g"]').forEach((function(e){e.onclick=function(t){t.preventDefault();var n=e.href.replace("https://exhentai.org/g","");F.Router.push("/[gid]/[token]",n)}}))}),[]),de(te.a,{ref:t},0===n.length?de(R.a,{gutterBottom:!0,align:"center",variant:"subtitle1",component:"p"},u("G.noComments")):n.map((function(e,t){return de(ne.a,{key:t,divider:t!==n.length-1,disableGutters:o},de(oe.a,{primary:de(T.a,{container:!0,justify:"space-between"},de(R.a,{component:"span"},e.userName),de(R.a,{component:"span"},e.time)),secondary:de("div",{className:Object(d.a)(c.comment,Object(a.a)({},c.hidden,o)),dangerouslySetInnerHTML:{__html:"".concat(e.comment,"<span> ").concat(e.score,"</span>")}}),secondaryTypographyProps:{component:"div"}}))})))})),pe=function(e){var t=e.commentList,n=Object(ae.a)(),o=Object(ie.b)(),a=Object(H.useRouter)(),i=a.query.showPage,s=a.query.gid,u=a.query.token,l=Object(F.useTranslation)(),d=Object(r.a)(l,1)[0];return de(c.a.Fragment,null,t.length>0&&de(T.a,{container:!0,alignItems:"center",style:{marginBlock:-10}},de(T.a,{item:!0,xs:!0},de(R.a,{variant:"subtitle1"},d("G.Comments"))),de(T.a,{item:!0},de(ee.a,{onClick:function(){return F.Router.push("/[gid]/[token]?showPage=comments","/".concat(s,"/").concat(u,"?showPage=comments"))}},de(le.a,null)))),de(fe,{hidden:!0,commentList:t.slice(0,2)}),de(re.a,{fullScreen:Boolean(o),fullWidth:!Boolean(o),open:"comments"===i,onClose:function(){return F.Router.back()},scroll:"paper"},o&&de(J.a,{position:"sticky"},de(Q.a,null,de(ee.a,{edge:"start",color:"inherit",onClick:function(){return F.Router.back()}},de(se.a,null)),de(R.a,{style:{marginLeft:n.spacing(2)},variant:"h6"},d("G.Comments")))),!o&&de(Z.a,{style:{padding:n.spacing(2,2,0)}},d("G.Comments")),de(fe,{commentList:t})))},be=c.a.createElement,ge=Object(B.a)((function(e){return Object(W.a)({root:{display:"flex"},details:{display:"flex",flexDirection:"column",flex:"1"},cover:{margin:e.spacing(0,"auto"),maxHeight:320},center:{display:"flex",alignItems:"center"},divider:{margin:e.spacing(0,0,1)},border:Object(a.a)({borderStyle:"solid",borderColor:e.palette.divider,borderWidth:"0 1px",flex:1,padding:e.spacing(0,1),margin:e.spacing(0,1)},e.breakpoints.down("sm"),{borderWidth:"1px 0",padding:e.spacing(1,0),margin:e.spacing(1,0)}),infoContainer:Object(a.a)({},e.breakpoints.down("sm"),{display:"flex",flexDirection:"column"}),loadingContainer:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"calc(100vh - 93px)","& > * + *":{marginTop:e.spacing(1)}}})})),he=function(){var e=Object(H.useRouter)(),t=e.query.gid,n=e.query.token,a=Object(F.useTranslation)(),i=Object(r.a)(a,1)[0],c=Object(U.a)({url:"/".concat(t,"/").concat(n)}).data,u=ge();return!c||c.error?be(q.a,{title:i("Loading")+"...",fullScreen:!0,showBack:!0},be(Y.a,null)):be(q.a,{title:c.info.title,gutterBottom:!0,showBack:!0},be(s.a,{info:c.info,tagList:c.tagList}),be(pe,{commentList:c.commentList||[]}),be(o.a,{variant:"fullWidth",className:u.divider}),be(X,{filecount:parseInt(c.info.filecount),initialData:c.list,url:"/".concat(t,"/").concat(n)}))};t.default=he;he.getInitialProps=function(){return{}}},SpVV:function(e,t,n){"use strict";var o=n("mXGw"),r=n("xARA"),a=(n("W0B4"),n("xlJo")),i=n("q3GK"),c=n("j26d");function s(e){return e.substring(2).toLowerCase()}t.a=function(e){var t=e.children,n=e.disableReactTree,u=void 0!==n&&n,l=e.mouseEvent,d=void 0===l?"onClick":l,m=e.onClickAway,f=e.touchEvent,p=void 0===f?"onTouchEnd":f,b=o.useRef(!1),g=o.useRef(null),h=o.useRef(!1),v=o.useRef(!1);o.useEffect((function(){return h.current=!0,function(){h.current=!1}}),[]);var O=o.useCallback((function(e){g.current=r.findDOMNode(e)}),[]),y=Object(i.a)(t.ref,O),j=Object(c.a)((function(e){var t=v.current;if(v.current=!1,h.current&&g.current&&!function(e){return document.documentElement.clientWidth<e.clientX||document.documentElement.clientHeight<e.clientY}(e))if(b.current)b.current=!1;else{var n;if(e.composedPath)n=e.composedPath().indexOf(g.current)>-1;else n=!Object(a.a)(g.current).documentElement.contains(e.target)||g.current.contains(e.target);n||!u&&t||m(e)}})),x=function(e){return function(n){v.current=!0;var o=t.props[e];o&&o(n)}},E={ref:y};return!1!==p&&(E[p]=x(p)),o.useEffect((function(){if(!1!==p){var e=s(p),t=Object(a.a)(g.current),n=function(){b.current=!0};return t.addEventListener(e,j),t.addEventListener("touchmove",n),function(){t.removeEventListener(e,j),t.removeEventListener("touchmove",n)}}}),[j,p]),!1!==d&&(E[d]=x(d)),o.useEffect((function(){if(!1!==d){var e=s(d),t=Object(a.a)(g.current);return t.addEventListener(e,j),function(){t.removeEventListener(e,j)}}}),[j,d]),o.createElement(o.Fragment,null,o.cloneElement(t,E))}},W6lt:function(e,t,n){"use strict";var o=n("Fcif"),r=n("dV/x"),a=n("mXGw"),i=(n("W0B4"),n("PDtE")),c=n("gbh0"),s=n("x+AB"),u=a.forwardRef((function(e,t){var n=e.children,c=e.classes,u=e.className,l=e.focusVisibleClassName,d=Object(r.a)(e,["children","classes","className","focusVisibleClassName"]);return a.createElement(s.a,Object(o.a)({className:Object(i.a)(c.root,u),focusVisibleClassName:Object(i.a)(l,c.focusVisible),ref:t},d),n,a.createElement("span",{className:c.focusHighlight}))}));t.a=Object(c.a)((function(e){return{root:{display:"block",textAlign:"inherit",width:"100%","&:hover $focusHighlight":{opacity:e.palette.action.hoverOpacity},"&$focusVisible $focusHighlight":{opacity:.12}},focusVisible:{},focusHighlight:{overflow:"hidden",pointerEvents:"none",position:"absolute",top:0,right:0,bottom:0,left:0,borderRadius:"inherit",opacity:0,backgroundColor:"currentcolor",transition:e.transitions.create("opacity",{duration:e.transitions.duration.short})}}}),{name:"MuiCardActionArea"})(u)},YMGn:function(e,t,n){"use strict";var o=n("63Ad");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n("mXGw")),a=(0,o(n("c9Um")).default)(r.default.createElement("path",{d:"M8 5v14l11-7z"}),"PlayArrow");t.default=a},tCsj:function(e,t,n){"use strict";var o=n("Fcif"),r=n("aNYv"),a=n("dV/x"),i=n("mXGw"),c=(n("W0B4"),n("m3N6")),s=n("+Gfr"),u=n("lOOT"),l=n("pNlz"),d=n("q3GK"),m={entering:{transform:"none"},entered:{transform:"none"}},f={enter:s.b.enteringScreen,exit:s.b.leavingScreen},p=i.forwardRef((function(e,t){var n=e.children,s=e.disableStrictModeCompat,p=void 0!==s&&s,b=e.in,g=e.onEnter,h=e.onEntered,v=e.onEntering,O=e.onExit,y=e.onExited,j=e.onExiting,x=e.style,E=e.timeout,w=void 0===E?f:E,k=e.TransitionComponent,C=void 0===k?c.a:k,R=Object(a.a)(e,["children","disableStrictModeCompat","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"]),N=Object(u.a)(),T=N.unstable_strictMode&&!p,D=i.useRef(null),L=Object(d.a)(n.ref,t),M=Object(d.a)(T?D:void 0,L),S=function(e){return function(t,n){if(e){var o=T?[D.current,t]:[t,n],a=Object(r.a)(o,2),i=a[0],c=a[1];void 0===c?e(i):e(i,c)}}},V=S(v),B=S((function(e,t){Object(l.b)(e);var n=Object(l.a)({style:x,timeout:w},{mode:"enter"});e.style.webkitTransition=N.transitions.create("transform",n),e.style.transition=N.transitions.create("transform",n),g&&g(e,t)})),W=S(h),P=S(j),z=S((function(e){var t=Object(l.a)({style:x,timeout:w},{mode:"exit"});e.style.webkitTransition=N.transitions.create("transform",t),e.style.transition=N.transitions.create("transform",t),O&&O(e)})),G=S(y);return i.createElement(C,Object(o.a)({appear:!0,in:b,nodeRef:T?D:void 0,onEnter:B,onEntered:W,onEntering:V,onExit:z,onExited:G,onExiting:P,timeout:w},R),(function(e,t){return i.cloneElement(n,Object(o.a)({style:Object(o.a)({transform:"scale(0)",visibility:"exited"!==e||b?void 0:"hidden"},m[e],x,n.props.style),ref:M},t))}))}));t.a=p}},[["5i2T",1,2,11,0,3,4,5,6,7,8,10,9,12,13,18,17,20]]]);